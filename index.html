<!DOCTYPE html>
<html>
<head>
    <title>Hawaii Maps</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        .map-container {
            margin-bottom: 30px;
        }
        
        .map {
            height: 500px;
            width: 100%;
            border: 2px solid #333;
        }
        
        h2 {
            margin-top: 0;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<h1>Hawaii District Maps</h1>

<!-- Map 1: County Councils -->
<div class="map-container">
    <h2>County Council Districts</h2>
    <div id="map1" class="map"></div>
</div>

<!-- Map 2: House -->
<div class="map-container">
    <h2>State House Districts</h2>
    <div id="map2" class="map"></div>
</div>

<!-- Map 3: Senate -->
<div class="map-container">
    <h2>State Senate Districts</h2>
    <div id="map3" class="map"></div>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    // ============ STYLING ============
    
    function styleFeature(feature) {
        return {
            fillColor: '#3388ff',    // Blue fill
            fillOpacity: 0.5,
            color: '#333',           // Dark border
            weight: 2,
            opacity: 1
        };
    }
    
    // ============ POPUP FUNCTION ============
    
    function onEachFeature(feature, layer) {
        if (feature.properties) {
            let popupContent = '<div style="max-width: 250px;">';
            
            // Display all properties
            for (let key in feature.properties) {
                let value = feature.properties[key];
                if (value !== null && value !== '') {
                    popupContent += `<b>${key}:</b> ${value}<br>`;
                }
            }
            
            popupContent += '</div>';
            layer.bindPopup(popupContent);
        }
    }
    
    // ============ INITIALIZE MAPS ============
    
    const hawaiiCenter = [20.7984, -156.3319];
    const defaultZoom = 8;
    
    // Satellite basemap
    const satelliteLayer = 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}';
    const satelliteAttribution = 'Tiles &copy; Esri';
    
    // Create Map 1
    const map1 = L.map('map1').setView(hawaiiCenter, defaultZoom);
    L.tileLayer(satelliteLayer, { attribution: satelliteAttribution, maxZoom: 18 }).addTo(map1);
    
    // Create Map 2
    const map2 = L.map('map2').setView(hawaiiCenter, defaultZoom);
    L.tileLayer(satelliteLayer, { attribution: satelliteAttribution, maxZoom: 18 }).addTo(map2);
    
    // Create Map 3
    const map3 = L.map('map3').setView(hawaiiCenter, defaultZoom);
    L.tileLayer(satelliteLayer, { attribution: satelliteAttribution, maxZoom: 18 }).addTo(map3);
    
    // ============ LOAD DATA ============
    
    // Map 1: County Council Districts (4 counties)
    const countyLayers = [
        'Hawaii County.geojson',
        'Maui County.geojson',
        'Honolulu County.geojson',
        'Kauai County.geojson'
    ];
    
    countyLayers.forEach(layerPath => {
        fetch(layerPath)
            .then(response => response.json())
            .then(data => {
                L.geoJSON(data, {
                    style: styleFeature,
                    onEachFeature: onEachFeature
                }).addTo(map1);
            })
            .catch(error => console.error('Error loading ' + layerPath + ':', error));
    });
    
    // Map 2: State House
    fetch('House.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                style: styleFeature,
                onEachFeature: onEachFeature
            }).addTo(map2);
        })
        .catch(error => console.error('Error loading House layer:', error));
    
    // Map 3: State Senate
    fetch('Senate.geojson')
        .then(response => response.json())
        .then(data => {
            L.geoJSON(data, {
                style: styleFeature,
                onEachFeature: onEachFeature
            }).addTo(map3);
        })
        .catch(error => console.error('Error loading Senate layer:', error));
    
</script>

</body>
</html>
